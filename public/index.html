<!DOCTYPE html>
<html lang="en" ng-app="tour-app">

  <!--  -->
  <!-- Meta content -->
  <!--  -->
  <head>
    <meta charset="utf-8">
    <!-- Ensure proper rendering and touch zooming -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <!-- Bootstrap: Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap: Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Angular Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>
    <!-- Link to app.js file -->
    <script type="text/javascript" src="app.js">
    </script>
    <title></title>
  </head>
  <!-- Body content -->
  <body ng-controller="mainController as ctrl" class="">
  <!-- Bootstrap container div  -->
    <div class="container">

      <!--  -->
      <!-- USER LOGIN AND REGISTER MODALS  -->
      <!--  -->
      <!-- Modal: LOGIN -->
      <div id="login" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <!-- Modal: Login -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">tour(206) # Log In</h4>
            </div>
            <div class="modal-body">
              <form ng-submit="ctrl.login(userPass)">
                <div class="form-group">
                  <label for="names">Username:</label>
                  <input ng-model="userPass.username" type="text" class="form-control" id="names">
                </div>
                <div class="form-group">
                  <label for="email">Email address:</label>
                  <input ng-model="userPass.email" type="email" class="form-control" id="email">
                </div>
                <div class="form-group">
                  <label for="pwd">Password:</label>
                  <input ng-model="userPass.password" type="password" class="form-control" id="pwd">
                </div>
                <div class="checkbox">
                  <label><input type="checkbox"> Remember me</label>
                </div>
                <button type="submit" class="btn btn-default">Submit</button>
              </form>
            </div>
            <p ng-if="ctrl.loggedIn==true">Welcome, {{ctrl.user.username}}! You are logged in.</p>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal: REG -->
      <div id="register" class="modal fade" role="dialog">
        <div class="modal-dialog">
        <!-- Modal: Reg -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">tour(206) # Register</h4>
            </div>
            <div class="modal-body">
              <form ng-submit="ctrl.register(userPass)">
                <div class="form-group">
                  <label for="names">Username:</label>
                  <input ng-model="userPass.username" type="text" class="form-control" id="names">
                </div>
                <div class="form-group">
                  <label for="email">Email address:</label>
                    <input ng-model="userPass.email" type="email" class="form-control" id="email">
                </div>
                <div class="form-group">
                  <label for="pwd">Password:</label>
                  <input ng-model="userPass.password" type="password" class="form-control" id="pwd">
                </div>
                <div class="checkbox">
                  <label><input type="checkbox"> Remember me</label>
                </div>
                <button type="submit" class="btn btn-default">Submit</button>
              </form>
            </div>
            <p ng-if="ctrl.loggedIn==true">Welcome, {{ctrl.user.username}}! You are logged in.</p>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!--  -->
      <!-- USER AUTHENTICATION BUTTONS -->
      <!--  -->
      <!-- Login button -->
      <div class="text-right">
        <br/><br/>
        <a href="#" class="btn btn-primary btn-sm text-right" data-toggle="modal" data-target="#login" ng-show="ctrl.loggedIn==false"> Log In</a>
        <!-- Register Button -->
        <a href="#" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#register" ng-show="ctrl.loggedIn==false"> Register</a>
        <!-- logout button -->
        <a href="#" class="btn btn-primary btn-sm text-right" ng-show="ctrl.loggedIn==true" ng-click="ctrl.logout();">Log Out {{ ctrl.user.username}}</a>
      </div>

      <!--  -->
      <!-- MAIN CONTENT -->
      <!--  -->
      <!-- Page header -->
      <div class="page-header">
        <h1>tour<strong>(206)</strong> <small> // let the <strong>music</strong> find <strong>you</strong></small></h1>
      </div>

      <!-- Filler quote -->
      <blockquote cite="Nietzsche" class="">
        <p>"Without music, [Seattle] would be a mistake."</p>
      </blockquote>

      <!-- Navigation tabs to click between venues, shows, and user's saved shows -->
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#venues">Venues</a></li>
        <li><a data-toggle="tab" href="#shows">Shows</a></li>
        <li><a data-toggle="tab" href="#myshows">My Plans</a></li>
      </ul>

      <!-- Container div for the three nav tabs: venues, shows, and user's saved shows -->
      <div  class="tab-content">

        <!-- Tab content: Venues Page -->
        <div id="venues" class="tab-pane fade in active">
          <h1>Venues</h1>
          <!-- DATA CONTENT -->
          <ul class="list-group">
            <li class="list-group-item">First venue</li>
            <li class="list-group-item">Second venue</li>
            <li class="list-group-item">Third venue</li>
          </ul>

        </div>


        <!-- Tab content: Events(shows) page -->
        <div id="shows" class="tab-pane fade">
          <h1>Shows</h1>
          <!-- Filter searchbox -->
          <input ng-model="q" id="search" placeholder="Filter"> </input><span class="glyphicon glyphicon-search"></span>
          <br/><br/>
          <!-- Dropdown: User can choose how many venue entries display on one page -->
          View <select ng-model="pageSize" id="pageSize">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
          </select> shows per page.
          <br/><br/>
          <!-- data content -->
          <div class="list-group" ng-repeat="event in ctrl.events | orderBy:'start.local' | filter: q | startFrom: currentPage*pageSize | limitTo: pageSize" class="list-group" >
            <p class="list-group-item">
              <a href="#" class="glyphicon glyphicon-music" title="Save to My Shows" ng-click="favoriteShow(event);"></a>
              <strong>{{event.name.text}}</strong>
            </p>
            <p class="list-group-item">{{event.start.local | date:'MM/dd/yyyy @ h:mma'}}</p>
            <p class="list-group-item" id="event-description" ng-init="limit=200">
              {{event.description.text | limitTo: limit }}
              <code ng-click="limit=Number.MAX_SAFE_INTEGER"> expand/collapse </code><br/>
              <img class="thumbnail" src="{{event.logo.url}}" alt="">
            </p>
          </div>
          <!-- Pagination -->
          <ul class="pager">
            <li><a href="#" ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">&laquo; Previous</a></li>
            <li>{{currentPage+1}}/{{numberOfPages()}}</li>
            <li><a href="#" ng-disabled="currentPage >= getData().length/pageSize - 1" ng-click="currentPage=currentPage+1">Next &raquo;</a></li>
          </ul>
        </div>


        <!-- Tab content: user's saved shows -->
        <div id="myshows" class="tab-pane fade">
          <h1>My Shows</h1>
          <h3 ng-hide="ctrl.loggedIn==true">Please log in to view your saved events.</h3>
          <!-- data content -->
          <div class="list-group" ng-repeat="myshow in ctrl.myshows" >
            <p class="list-group-item">
              <a href="#" class="glyphicon glyphicon-music"></a>
              <strong>{{myshow.name}}</strong>
              <a href="#" class="button button-sm" title="Unfavorite" ng-click="unfavoriteShow(myshow);">Unfollow This Event</a>
            </p>
            <p class="list-group-item">{{myshow.start | date:'MM/dd/yyyy @ h:mma'}}</p>
            <p class="list-group-item" id="myshow-description" ng-init="limit=200">
              {{myshow.description | limitTo: limit }}
              <code ng-click="limit=Number.MAX_SAFE_INTEGER"> expand/collapse </code><br/>
            </p>
            <a id="add-desc" class="list-group-item" href="#" class="button button-sm" title="Change Description" data-toggle="modal" data-target="#describe" ng-click="updateShow(myshow);">Personalize the Event Description</a>
          </div>
          <!-- Pagination -->
        </div>
      </div>
    </div>

    <!-- about the site: link to about modal -->
    <footer class="container">
      <a data-toggle="modal" data-target="#about">About tour(206)</a>
    </footer>

    <!-- Modal Edit description -->
    <div id="describe" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Edit Description</h4>
          </div>
          <div class="modal-body">
            <form ng-submit="updateDescription();">
              <div class="form-group">
                <label for="description">Description</label>
                <input ng-model="ctrl.formdata" type="text" class="form-control" id="description" placeholder="Add your personalized description here"/>
              </div>
              <button type="submit" class="btn btn-default">Submit</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal ABOUT-->
    <div id="about" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">tour(206)</h4>
          </div>
          <div class="modal-body">
            <p>Created by Maya Goldstein and David Gardner for General Assembly WDIr-Gizmo, Sept 2017</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<!-- THAT'S ALL FOLKS -->
